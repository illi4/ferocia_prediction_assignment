# Configuration file for the marketing ML Pipeline
# This file contains all hyperparameters, thresholds, and settings for reproducible model training

# General settings
general:
  random_seed: 42
  project_name: "marketing_prediction"
  
# Data settings
data:
  target_column: "y"
  test_size: 0.2
  stratify: true
  
# Feature engineering and transformation settings
feature_engineering:
  # Features to remove
  features_to_drop:
    - "day"  # Doesn't provide meaningful information in numeric form
  
  # pdays transformation
  pdays:
    never_contacted_value: -1  # Value indicating never contacted
    create_binary_feature: true  # Create was_contacted_before feature
    create_days_feature: true    # Create days_since_contact feature
    days_for_never_contacted: 0  # Value for days_since_contact when never contacted

# Outlier removal settings
outlier_removal:
  # Apply 3×IQR rule for these features
  iqr_multiplier: 3.0
  iqr_features:
    - "age"
    - "balance"
    - "duration"
    - "campaign"
  
  # Specific threshold removals
  threshold_removals:
    previous:
      max_value: 50
    days_since_contact:
      max_value: 800

# Categorical encoding settings
categorical_encoding:
  method: "label"  # Options: "label" or "onehot"
  # Keep 'unknown' as separate category for these features
  keep_unknown_features:
    - "poutcome"
    - "contact"
    - "education"
    - "job"
  
  categorical_features:
    - "job"
    - "marital"
    - "education"
    - "default"
    - "housing"
    - "loan"
    - "contact"
    - "month"
    - "poutcome"
    - "was_contacted_before"

# Model settings
model:
  algorithm: "xgboost"
  
  # XGBoost hyperparameters (subject for experimentation)
  xgboost:
    n_estimators: 100
    max_depth: 6
    learning_rate: 0.1
    min_child_weight: 1
    gamma: 0
    subsample: 0.8
    colsample_bytree: 0.8
    reg_alpha: 0
    reg_lambda: 1
    
    # Class imbalance handling
    scale_pos_weight: 7.5  # Ratio of negative to positive class (88.3% / 11.7% ≈ 7.5)
    
    # Other settings
    objective: "binary:logistic"
    eval_metric: "logloss"
    random_state: 42
    n_jobs: -1
    verbosity: 1
  
  # Training-specific settings
  training:
    early_stopping_rounds: 10

# Training settings
training:
  validation_split: 0.2
  cv_folds: 5

# Evaluation settings
evaluation:
  primary_metric: "f1"
  f1_threshold: 0.40
  metrics:
    - "accuracy"
    - "precision"
    - "recall"
    - "f1"
    - "roc_auc"
    - "pr_auc"
  classification_threshold: 0.5
  show_confusion_matrix: true
  show_feature_importance: true
  top_n_features: 15

# Logging settings
logging:
  log_dir: "logs"
  log_level: "INFO"
  log_format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  save_metrics: true
  save_predictions: true
  save_feature_importance: true

# Model packaging settings
packaging:
  model_dir: "models"
  model_name: "marketing_model"  # Changed from bank_marketing_model
  
  save_items:
    - "model"
    - "preprocessor"
    - "config"
    - "feature_names"
    - "metrics"
  
  version_format: "v{timestamp}"
  
  # Possible future improvement: save with PyTorch wrapper

# API Settings
api:
  model_name: "marketing_model"
  model_version: "latest"  # Set to specific version string (e.g. "v2025...") or "latest"